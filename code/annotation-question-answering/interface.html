<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Annotation Interface</title>
</head>
<body>
<!-- MTURK START -->
<style>
.todo {
  background: #f8d7da;
}
</style>
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>
<crowd-form answer-format="flatten-objects">
<!-- CUSTOM START -->

<h3>Read the question and both answers carefully</h3>
<div><p>
<label><b>Question</b>:</label> ${question}<br><br>
<label><b>Answer 1</b>:</label> ${groundtruth}<br><br>
<label><b>Answer 2</b>:</label> ${prediction} 
</p></div>

<h3>Select for each statement whether you agree or disagree with it</h3>
<table>

<tr>
<td>
<b>Answer 2</b> is missing words.
</td>
<td>
<crowd-radio-group>
<crowd-radio-button name="cut-off-agree">Agree</crowd-radio-button>
<crowd-radio-button name="cut-off-disagree">Disagree</crowd-radio-button>
</crowd-radio-group>
</td>
</tr>

<tr>
<td>
<b>Answer 2</b> does address the <b>Question</b> (but could be wrong).
</td>
<td>
<crowd-radio-group>
<crowd-radio-button name="plausible-agree">Agree</crowd-radio-button>
<crowd-radio-button name="plausible-disagree">Disagree</crowd-radio-button>
</crowd-radio-group>
</td>
</tr>

<tr>
<td>
<b>Answer 2</b> would be a better answer if some part of it were removed.
</td>
<td>
<crowd-radio-group>
<crowd-radio-button name="compact-agree">Agree</crowd-radio-button>
<crowd-radio-button name="compact-disagree">Disagree</crowd-radio-button>
</crowd-radio-group>
</td>
</tr>

<tr>
<td>
<b>Answer 2</b> contains all the important information of <b>Answer 1</b>.
</td>
<td>
<crowd-radio-group>
<crowd-radio-button name="complete-agree">Agree</crowd-radio-button>
<crowd-radio-button name="complete-disagree">Disagree</crowd-radio-button>
</crowd-radio-group>
</td>
</tr>

<tr>
<td>
<b>Answer 2</b> is harder to understand than <b>Answer 1</b>.
</td>
<td>
<crowd-radio-group>
<crowd-radio-button name="incomprehensible-agree">Agree</crowd-radio-button>
<crowd-radio-button name="incomprehensible-disagree">Disagree</crowd-radio-button>
</crowd-radio-group>
</td>
</tr>

</table>

<div>
<crowd-text-area name="comments" rows="4" placeholder="Comments (optional)"></crowd-text-area>
</div>

<!-- CUSTOM END -->
</crowd-form>
<script>
function validateForm(markTodos = false) {
  // radio buttons
  const radioGroups = document.querySelectorAll("crowd-radio-group");
  for (let r = 0; r < radioGroups.length; ++r) {
    const radioGroup = radioGroups[r];
    const hasChecked = (radioGroup.querySelector("[checked]") !== null);
    if (hasChecked) {
      radioGroup.classList.remove("todo");
    } else if (markTodos === true) {
      radioGroup.classList.add("todo");
    }
  }

  const noTodoLeft = (document.querySelector(".todo") === null);
  return noTodoLeft;
}

document.addEventListener("change", validateForm);

document.querySelector('crowd-form').onsubmit = function(e) {
  if (!validateForm(true)) { e.preventDefault(); }
}
</script>
<!-- MTURK END -->
</body>
</html>
